"use strict";(self.webpackChunkonboard_notify_react=self.webpackChunkonboard_notify_react||[]).push([[6571],{66571:function(e,t,n){n.r(t),n.d(t,{Web3Auth:function(){return U},defaultEvmDappModalConfig:function(){return D},defaultEvmWalletModalConfig:function(){return _},defaultOtherModalConfig:function(){return I},defaultSolanaDappModalConfig:function(){return y},defaultSolanaWalletModalConfig:function(){return R}});var r=n(20240),a=n(46622),o=n(19961),i=n(53755),c=n(47061),s=n(59900),l=n(14771),u=n(12731),p=n(24269),d=n(24593),h=n(70886),f=n(88047),A=n.n(f),E=n(68726);function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var v=O(O({},a.CHAIN_NAMESPACES),{},{MULTICHAIN:"multichain"});function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function T(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function b(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,h.Z)(e);if(t){var a=(0,h.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,d.Z)(this,n)}}var m,N,C="Web3Auth-cachedAdapter",P=function(e){(0,p.Z)(n,e);var t=b(n);function n(e){var o,i,s,u,p;if((0,c.Z)(this,n),p=t.call(this),(0,r.Z)((0,l.Z)(p),"coreOptions",void 0),(0,r.Z)((0,l.Z)(p),"connectedAdapterName",null),(0,r.Z)((0,l.Z)(p),"status",a.ADAPTER_STATUS.NOT_READY),(0,r.Z)((0,l.Z)(p),"cachedAdapter",null),(0,r.Z)((0,l.Z)(p),"walletAdapters",{}),(0,r.Z)((0,l.Z)(p),"plugins",{}),(0,r.Z)((0,l.Z)(p),"storage","localStorage"),!e.clientId)throw a.WalletInitializationError.invalidParams("Please provide a valid clientId in constructor");if(e.enableLogging?a.log.enableAll():a.log.disableAll(),null===(o=e.chainConfig)||void 0===o||!o.chainNamespace||!Object.values(a.CHAIN_NAMESPACES).includes(null===(i=e.chainConfig)||void 0===i?void 0:i.chainNamespace))throw a.WalletInitializationError.invalidParams("Please provide a valid chainNamespace in chainConfig");return"session"===e.storageKey&&(p.storage="sessionStorage"),p.cachedAdapter=(0,a.storageAvailable)(p.storage)?window[p.storage].getItem(C):null,p.coreOptions=T(T({},e),{},{chainConfig:T(T({},(0,a.getChainConfig)(null===(s=e.chainConfig)||void 0===s?void 0:s.chainNamespace,null===(u=e.chainConfig)||void 0===u?void 0:u.chainId)||{}),e.chainConfig)}),p.subscribeToAdapterEvents=p.subscribeToAdapterEvents.bind((0,l.Z)(p)),p}return(0,s.Z)(n,[{key:"provider",get:function(){return this.status===a.ADAPTER_STATUS.CONNECTED&&this.connectedAdapterName?this.walletAdapters[this.connectedAdapterName].provider:null},set:function(e){throw new Error("Not implemented")}},{key:"init",value:function(){var e=(0,i.Z)(A().mark((function e(){var t,n=this;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object.keys(this.walletAdapters).map((function(e){if(n.subscribeToAdapterEvents(n.walletAdapters[e]),!n.walletAdapters[e].chainConfigProxy){var t=n.coreOptions.chainConfig;if(!t.chainNamespace)throw a.WalletInitializationError.invalidParams("Please provide chainNamespace in chainConfig");var r=T(T({},(0,a.getChainConfig)(t.chainNamespace,t.chainId)),t);n.walletAdapters[e].setChainConfig(r)}return n.walletAdapters[e].setAdapterSettings({sessionTime:n.coreOptions.sessionTime,clientId:n.coreOptions.clientId}),n.walletAdapters[e].init({autoConnect:n.cachedAdapter===e}).catch((function(e){return a.log.error(e)}))})),this.status=a.ADAPTER_STATUS.READY,e.next=4,Promise.all(t);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"configureAdapter",value:function(e){this.checkInitRequirements();var t=this.coreOptions.chainConfig;if(!t.chainNamespace)throw a.WalletInitializationError.invalidParams("Please provide chainNamespace in chainConfig");if(this.walletAdapters[e.name])throw a.WalletInitializationError.duplicateAdapterError("Wallet adapter for ".concat(e.name," already exists"));if(e.adapterNamespace!==a.ADAPTER_NAMESPACES.MULTICHAIN&&e.adapterNamespace!==t.chainNamespace)throw a.WalletInitializationError.incompatibleChainNameSpace("This wallet adapter belongs to ".concat(e.adapterNamespace," which is incompatible with currently used namespace: ").concat(t.chainNamespace));return e.adapterNamespace===a.ADAPTER_NAMESPACES.MULTICHAIN&&e.currentChainNamespace&&t.chainNamespace!==e.currentChainNamespace&&e.setChainConfig(t),this.walletAdapters[e.name]=e,this}},{key:"clearCache",value:function(){(0,a.storageAvailable)(this.storage)&&(window[this.storage].removeItem(C),this.cachedAdapter=null)}},{key:"connectTo",value:function(){var e=(0,i.Z)(A().mark((function e(t,n){var r;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.walletAdapters[t]){e.next=2;break}throw a.WalletInitializationError.notFound("Please add wallet adapter for ".concat(t," wallet, before connecting"));case 2:return e.next=4,this.walletAdapters[t].connect(n);case 4:return r=e.sent,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"logout",value:function(){var e=(0,i.Z)(A().mark((function e(){var t,n=arguments;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.length>0&&void 0!==n[0]?n[0]:{cleanup:!1},this.status===a.ADAPTER_STATUS.CONNECTED&&this.connectedAdapterName){e.next=3;break}throw a.WalletLoginError.notConnectedError("No wallet is connected");case 3:return e.next=5,this.walletAdapters[this.connectedAdapterName].disconnect(t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getUserInfo",value:function(){var e=(0,i.Z)(A().mark((function e(){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.log.debug("Getting user info",this.status,this.connectedAdapterName),this.status===a.ADAPTER_STATUS.CONNECTED&&this.connectedAdapterName){e.next=3;break}throw a.WalletLoginError.notConnectedError("No wallet is connected");case 3:return e.abrupt("return",this.walletAdapters[this.connectedAdapterName].getUserInfo());case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"authenticateUser",value:function(){var e=(0,i.Z)(A().mark((function e(){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.status===a.ADAPTER_STATUS.CONNECTED&&this.connectedAdapterName){e.next=2;break}throw a.WalletLoginError.notConnectedError("No wallet is connected");case 2:return e.abrupt("return",this.walletAdapters[this.connectedAdapterName].authenticateUser());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addPlugin",value:function(){var e=(0,i.Z)(A().mark((function e(t){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.plugins[t.name]){e.next=2;break}throw new Error("Plugin ".concat(t.name," already exist"));case 2:if(t.pluginNamespace===v.MULTICHAIN||t.pluginNamespace===this.coreOptions.chainConfig.chainNamespace){e.next=4;break}throw new Error("This plugin belongs to ".concat(t.pluginNamespace," namespace which is incompatible with currently used namespace: ").concat(this.coreOptions.chainConfig.chainNamespace));case 4:return this.plugins[t.name]=t,e.next=7,t.initWithWeb3Auth(this);case 7:return e.abrupt("return",this);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"subscribeToAdapterEvents",value:function(e){var t=this;e.on(a.ADAPTER_EVENTS.CONNECTED,function(){var e=(0,i.Z)(A().mark((function e(n){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.status=a.ADAPTER_STATUS.CONNECTED,t.connectedAdapterName=n.adapter,t.cacheWallet(n.adapter),a.log.debug("connected",t.status,t.connectedAdapterName),e.next=6,Promise.all(Object.values(t.plugins).map((function(e){return e.connect().catch((function(e){5211!==e.code&&a.log.error(e)}))})));case 6:t.emit(a.ADAPTER_EVENTS.CONNECTED,T({},n));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.on(a.ADAPTER_EVENTS.DISCONNECTED,function(){var e=(0,i.Z)(A().mark((function e(n){var r;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.status=a.ADAPTER_STATUS.READY,(0,a.storageAvailable)(t.storage)&&(r=window[t.storage].getItem(C),t.connectedAdapterName===r&&t.clearCache()),a.log.debug("disconnected",t.status,t.connectedAdapterName),e.next=5,Promise.all(Object.values(t.plugins).map((function(e){return e.disconnect().catch((function(e){5211!==e.code&&a.log.error(e)}))})));case 5:t.connectedAdapterName=null,t.emit(a.ADAPTER_EVENTS.DISCONNECTED,n);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.on(a.ADAPTER_EVENTS.CONNECTING,(function(e){t.status=a.ADAPTER_STATUS.CONNECTING,t.emit(a.ADAPTER_EVENTS.CONNECTING,e),a.log.debug("connecting",t.status,t.connectedAdapterName)})),e.on(a.ADAPTER_EVENTS.ERRORED,(function(e){t.status=a.ADAPTER_STATUS.ERRORED,t.clearCache(),t.emit(a.ADAPTER_EVENTS.ERRORED,e),a.log.debug("errored",t.status,t.connectedAdapterName)})),e.on(a.ADAPTER_EVENTS.ADAPTER_DATA_UPDATED,(function(e){a.log.debug("adapter data updated",e),t.emit(a.ADAPTER_EVENTS.ADAPTER_DATA_UPDATED,e)}))}},{key:"checkInitRequirements",value:function(){if(this.status===a.ADAPTER_STATUS.CONNECTING)throw a.WalletInitializationError.notReady("Already pending connection");if(this.status===a.ADAPTER_STATUS.CONNECTED)throw a.WalletInitializationError.notReady("Already connected");if(this.status===a.ADAPTER_STATUS.READY)throw a.WalletInitializationError.notReady("Adapter is already initialized")}},{key:"cacheWallet",value:function(e){(0,a.storageAvailable)(this.storage)&&(window[this.storage].setItem(C,e),this.cachedAdapter=e)}}]),n}(E.Ue),S=n(48443),y={chainNamespace:a.CHAIN_NAMESPACES.SOLANA,adapters:(m={},(0,r.Z)(m,a.SOLANA_ADAPTERS.TORUS_SOLANA,{label:"Torus Wallet",showOnModal:!0,showOnMobile:!0,showOnDesktop:!0}),(0,r.Z)(m,a.SOLANA_ADAPTERS.OPENLOGIN,{label:"OpenLogin",showOnModal:!0,showOnMobile:!0,showOnDesktop:!0}),(0,r.Z)(m,a.SOLANA_ADAPTERS.PHANTOM,{label:"Phantom",showOnModal:!0,showOnMobile:!1,showOnDesktop:!0}),m)},D={chainNamespace:a.CHAIN_NAMESPACES.EIP155,adapters:(N={},(0,r.Z)(N,a.EVM_ADAPTERS.TORUS_EVM,{label:"Torus Wallet",showOnModal:!0,showOnMobile:!0,showOnDesktop:!0}),(0,r.Z)(N,a.EVM_ADAPTERS.METAMASK,{label:"MetaMask",showOnModal:!0,showOnMobile:!1,showOnDesktop:!0}),(0,r.Z)(N,a.EVM_ADAPTERS.OPENLOGIN,{label:"OpenLogin",showOnModal:!0,showOnMobile:!0,showOnDesktop:!0}),(0,r.Z)(N,a.EVM_ADAPTERS.WALLET_CONNECT_V1,{label:"Wallet Connect",showOnModal:!0,showOnMobile:!0,showOnDesktop:!0}),N)},R={chainNamespace:a.CHAIN_NAMESPACES.SOLANA,adapters:(0,r.Z)({},a.SOLANA_ADAPTERS.OPENLOGIN,{label:"OpenLogin",showOnModal:!0,showOnMobile:!0,showOnDesktop:!0})},_={chainNamespace:a.CHAIN_NAMESPACES.EIP155,adapters:(0,r.Z)({},a.EVM_ADAPTERS.OPENLOGIN,{label:"OpenLogin",showOnModal:!0,showOnMobile:!0,showOnDesktop:!0})},I={chainNamespace:a.CHAIN_NAMESPACES.OTHER,adapters:(0,r.Z)({},a.EVM_ADAPTERS.OPENLOGIN,{label:"OpenLogin",showOnModal:!0,showOnMobile:!0,showOnDesktop:!0})};function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function M(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var x=function(){var e=(0,i.Z)(A().mark((function e(t){var r,o,i,c,s,l,u,p,d,h,f,E,g,O,v,w,T,b,m,N,C,P,S,y;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.name,o=t.customChainConfig,i=t.clientId,Object.values(a.CHAIN_NAMESPACES).includes(o.chainNamespace)){e.next=3;break}throw new Error("Invalid chainNamespace: ".concat(o.chainNamespace));case 3:if(c=M(M({},(0,a.getChainConfig)(o.chainNamespace,null===o||void 0===o?void 0:o.chainId)),o||{}),r!==a.WALLET_ADAPTERS.TORUS_EVM){e.next=13;break}return e.next=7,Promise.all([n.e(4498),n.e(1800),n.e(2790),n.e(3177)]).then(n.bind(n,61506));case 7:return s=e.sent,l=s.TorusWalletAdapter,u=new l({chainConfig:c,clientId:i}),e.abrupt("return",u);case 13:if(r!==a.WALLET_ADAPTERS.TORUS_SOLANA){e.next=22;break}return e.next=16,Promise.all([n.e(4498),n.e(355),n.e(5001),n.e(8206),n.e(5275),n.e(9130),n.e(4607),n.e(8052),n.e(992)]).then(n.bind(n,28052));case 16:return p=e.sent,d=p.SolanaWalletAdapter,h=new d({chainConfig:c,clientId:i}),e.abrupt("return",h);case 22:if(r!==a.WALLET_ADAPTERS.METAMASK){e.next=31;break}return e.next=25,n.e(3501).then(n.bind(n,83501));case 25:return f=e.sent,E=f.MetamaskAdapter,g=new E({chainConfig:c,clientId:i}),e.abrupt("return",g);case 31:if(r!==a.WALLET_ADAPTERS.PHANTOM){e.next=40;break}return e.next=34,Promise.all([n.e(4498),n.e(355),n.e(5001),n.e(8206),n.e(5275),n.e(9130),n.e(4607),n.e(9912)]).then(n.bind(n,76392));case 34:return O=e.sent,v=O.PhantomAdapter,w=new v({chainConfig:c,clientId:i}),e.abrupt("return",w);case 40:if(r!==a.WALLET_ADAPTERS.WALLET_CONNECT_V1){e.next=49;break}return e.next=43,Promise.all([n.e(4498),n.e(355),n.e(5001),n.e(8206),n.e(7174),n.e(5275),n.e(4992),n.e(7983),n.e(1587),n.e(2132),n.e(6892),n.e(6814),n.e(7246)]).then(n.bind(n,66814));case 43:return T=e.sent,b=T.WalletConnectV1Adapter,m=new b({chainConfig:c,clientId:i}),e.abrupt("return",m);case 49:if(r!==a.WALLET_ADAPTERS.OPENLOGIN){e.next=58;break}return e.next=52,Promise.all([n.e(4498),n.e(355),n.e(5001),n.e(8206),n.e(5275),n.e(7844)]).then(n.bind(n,27844));case 52:return N=e.sent,C=N.OpenloginAdapter,P=N.getOpenloginDefaultOptions,S=P(o.chainNamespace,null===o||void 0===o?void 0:o.chainId),y=new C(M(M({},S),{},{chainConfig:M(M({},S.chainConfig||{}),c),adapterSettings:M(M({},S.adapterSettings),{},{clientId:i})})),e.abrupt("return",y);case 58:throw new Error("Invalid wallet adapter name");case 59:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),L={en:"english",de:"german",ja:"japanese",ko:"korean",zh:"mandarin",es:"spanish"};function Z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Z(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function W(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,h.Z)(e);if(t){var a=(0,h.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,d.Z)(this,n)}}var U=function(e){(0,p.Z)(n,e);var t=W(n);function n(e){var o,i,s,u;(0,c.Z)(this,n),u=t.call(this,e),(0,r.Z)((0,l.Z)(u),"loginModal",void 0),(0,r.Z)((0,l.Z)(u),"options",void 0),(0,r.Z)((0,l.Z)(u),"modalConfig",D),u.options=j({},e);var p=u.options.chainConfig;if(p.chainNamespace===a.CHAIN_NAMESPACES.SOLANA)"WALLET"===e.authMode?u.modalConfig=R:u.modalConfig=y;else if(p.chainNamespace===a.CHAIN_NAMESPACES.EIP155)"WALLET"===e.authMode?u.modalConfig=_:u.modalConfig=D;else{if(p.chainNamespace!==a.CHAIN_NAMESPACES.OTHER)throw new Error("Invalid chainNamespace provided: ".concat(p.chainNamespace));u.modalConfig=I}var d=function(e){var t=e;return t||(t=("undefined"!==typeof window&&(window.navigator.userLanguage||window.navigator.language)||"en-US").split("-")[0]),Object.prototype.hasOwnProperty.call(L,t)?t:"en"}(null===(o=u.options.uiConfig)||void 0===o?void 0:o.defaultLanguage);return u.loginModal=new S._A({theme:null===(i=u.options.uiConfig)||void 0===i?void 0:i.theme,appLogo:(null===(s=u.options.uiConfig)||void 0===s?void 0:s.appLogo)||"",version:"",adapterListener:(0,l.Z)(u),displayErrorsOnModal:u.options.displayErrorsOnModal,defaultLanguage:d}),u.subscribeToLoginModalEvents(),u}return(0,s.Z)(n,[{key:"initModal",value:function(){var e=(0,i.Z)(A().mark((function e(t){var r,c,s,l,p,d,f,E=this;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,u.Z)((0,h.Z)(n.prototype),"checkInitRequirements",this).call(this),e.next=3,this.loginModal.initModal();case 3:return r=this.options.chainConfig,c=(0,o.Z)(new Set([].concat((0,o.Z)(Object.keys(this.modalConfig.adapters||{})),(0,o.Z)(Object.keys(this.walletAdapters))))),s=c.map(function(){var e=(0,i.Z)(A().mark((function e(n){var o,i,c,s,l,u,p,d,h,f;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l=(null===(o=E.modalConfig.adapters)||void 0===o?void 0:o[n])||{label:n,showOnModal:!0,showOnMobile:!0,showOnDesktop:!0},null!==t&&void 0!==t&&null!==(i=t.modalConfig)&&void 0!==i&&i[n]&&(l=j(j({},l),t.modalConfig[n])),E.modalConfig.adapters[n]=l,u=E.walletAdapters[n],a.log.debug("adapter config",n,null===(c=E.modalConfig.adapters)||void 0===c?void 0:c[n].showOnModal,u),u||null===(s=E.modalConfig.adapters)||void 0===s||!s[n].showOnModal){e.next=13;break}return e.next=8,x({name:n,customChainConfig:E.options.chainConfig,clientId:E.options.clientId});case 8:return p=e.sent,E.walletAdapters[n]=p,e.abrupt("return",n);case 13:if((null===u||void 0===u?void 0:u.type)!==a.ADAPTER_CATEGORY.IN_APP&&(null===u||void 0===u?void 0:u.type)!==a.ADAPTER_CATEGORY.EXTERNAL&&n!==E.cachedAdapter){e.next=19;break}if(null!==(d=E.modalConfig.adapters)&&void 0!==d&&d[n].showOnModal){e.next=16;break}return e.abrupt("return");case 16:return E.walletAdapters[n].setAdapterSettings({clientId:E.options.clientId,sessionTime:E.options.sessionTime}),u.chainConfigProxy||(f=j(j({},(0,a.getChainConfig)(r.chainNamespace,null===(h=E.coreOptions.chainConfig)||void 0===h?void 0:h.chainId)),E.coreOptions.chainConfig),E.walletAdapters[n].setChainConfig(f)),e.abrupt("return",n);case 19:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=8,Promise.all(s);case 8:return l=e.sent,p=Object.values(this.walletAdapters).some((function(e){var t;if(e.type!==a.ADAPTER_CATEGORY.IN_APP)return!1;if(!0!==E.modalConfig.adapters[e.name].showOnModal)return!1;if(!E.modalConfig.adapters[e.name].loginMethods)return!0;var n=(0,S.rG)(e.name,E.walletAdapters[e.name],null===(t=E.modalConfig.adapters[e.name])||void 0===t?void 0:t.loginMethods);return!!Object.values(n).some((function(e){return e.showOnModal}))})),a.log.debug(p,this.walletAdapters,"hasInAppWallets"),d=l.map(function(){var e=(0,i.Z)(A().mark((function e(t){var n;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:if(e.prev=2,n=E.walletAdapters[t],E.cachedAdapter===t||n.type!==a.ADAPTER_CATEGORY.EXTERNAL){e.next=6;break}return e.abrupt("return");case 6:if(E.subscribeToAdapterEvents(n),n.status!==a.ADAPTER_STATUS.NOT_READY){e.next=10;break}return e.next=10,n.init({autoConnect:E.cachedAdapter===t});case 10:n.type===a.ADAPTER_CATEGORY.IN_APP&&E.initializeInAppWallet(t),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),a.log.error(e.t0,"error while initializing adapter");case 16:case"end":return e.stop()}}),e,null,[[2,13]])})));return function(t){return e.apply(this,arguments)}}()),this.status=a.ADAPTER_STATUS.READY,e.next=15,Promise.all(d);case 15:if((f=c.some((function(e){var t,n;return(null===(t=E.walletAdapters[e])||void 0===t?void 0:t.type)===a.ADAPTER_CATEGORY.EXTERNAL&&(null===(n=E.modalConfig.adapters)||void 0===n?void 0:n[e].showOnModal)})))&&this.loginModal.initExternalWalletContainer(),p||!f){e.next=20;break}return e.next=20,this.initExternalWalletAdapters(!1,{showExternalWalletsOnly:!0});case 20:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"connect",value:function(){var e=(0,i.Z)(A().mark((function e(){var t=this;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.provider){e.next=2;break}return e.abrupt("return",this.provider);case 2:return this.loginModal.open(),e.abrupt("return",new Promise((function(e,n){t.once(a.ADAPTER_EVENTS.CONNECTED,(function(){return e(t.provider)})),t.once(a.ADAPTER_EVENTS.ERRORED,(function(e){return n(e)}))})));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initExternalWalletAdapters",value:function(){var e=(0,i.Z)(A().mark((function e(t,n){var r,o=this;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=2;break}return e.abrupt("return");case 2:r={},Object.keys(this.walletAdapters).forEach(function(){var e=(0,i.Z)(A().mark((function e(t){var i;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((null===(i=o.walletAdapters[t])||void 0===i?void 0:i.type)!==a.ADAPTER_CATEGORY.EXTERNAL){e.next=9;break}if(a.log.debug("init external wallet",o.cachedAdapter,t),o.subscribeToAdapterEvents(i),o.cachedAdapter!==t){e.next=6;break}return e.abrupt("return");case 6:if(i.status!==a.ADAPTER_STATUS.NOT_READY){e.next=9;break}return e.next=9,i.init({autoConnect:o.cachedAdapter===t}).then((function(){r[t]=o.modalConfig.adapters[t],o.loginModal.addWalletLogins(r,{showExternalWalletsOnly:!(null===n||void 0===n||!n.showExternalWalletsOnly)})})).catch((function(e){return a.log.error(e,"error while initializing adapter")}));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"initializeInAppWallet",value:function(e){var t,n;(a.log.info("adapterInitResults",e),this.walletAdapters[e].type===a.ADAPTER_CATEGORY.IN_APP)&&this.loginModal.addSocialLogins(e,(0,S.rG)(e,this.walletAdapters[e],null===(t=this.modalConfig.adapters[e])||void 0===t?void 0:t.loginMethods),(null===(n=this.options.uiConfig)||void 0===n?void 0:n.loginMethodsOrder)||S.nS)}},{key:"subscribeToLoginModalEvents",value:function(){var e=this;this.loginModal.on(S.J9.LOGIN,function(){var t=(0,i.Z)(A().mark((function t(n){return A().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.connectTo(n.adapter,n.loginParams);case 3:t.next=8;break;case 5:t.prev=5,t.t0=t.catch(0),a.log.error("Error while connecting to adapter: ".concat(n.adapter),t.t0);case 8:case"end":return t.stop()}}),t,null,[[0,5]])})));return function(e){return t.apply(this,arguments)}}()),this.loginModal.on(S.J9.INIT_EXTERNAL_WALLETS,function(){var t=(0,i.Z)(A().mark((function t(n){return A().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.initExternalWalletAdapters(n.externalWalletsInitialized);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),this.loginModal.on(S.J9.DISCONNECT,(0,i.Z)(A().mark((function t(){return A().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.logout();case 3:t.next=8;break;case 5:t.prev=5,t.t0=t.catch(0),a.log.error("Error while disconnecting",t.t0);case 8:case"end":return t.stop()}}),t,null,[[0,5]])})))),this.loginModal.on(S.J9.MODAL_VISIBILITY,function(){var t=(0,i.Z)(A().mark((function t(n){var r,o;return A().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.log.debug("is login modal visible",n),e.emit(S.J9.MODAL_VISIBILITY,n),o=null===(r=e.walletAdapters[a.WALLET_ADAPTERS.WALLET_CONNECT_V1])||void 0===r?void 0:r.status,n&&o===a.ADAPTER_STATUS.READY)try{e.walletAdapters[a.WALLET_ADAPTERS.WALLET_CONNECT_V1].connect()}catch(i){a.log.error("Error while disconnecting to wallet connect in core",i)}case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}}]),n}(P)}}]);
//# sourceMappingURL=6571.40662c21.chunk.js.map